#!/bin/bash

# Bash Main Script for apache ITI shell project
# Author: Ahmed M. Saleh

# root access only restriction
if [ "$EUID" -ne 0 ]
  then echo "Access Denied, Please run as root"
  exit
fi

# opening
echo ""
echo "================================================================================="
echo "=============================== Apache2 Control ================================="
echo "================================================================================="
echo ""

# ask user to get input
PS3='What do you want to do: '

# generate menu using option
options=(
	"install apache2"
	"reinstall apache2"
	"uninstall apache2 only"
	"uninstall apache2 and remove conf files"
	"show apache2 status"
	"list all Vhosts"
	"add Vhost"
	"delete Vhost"
	"enable site"
	"disable site"
	"enable authentication"
	"disable authentication"
	"quit"
)

select opt in "${options[@]}"; do
	case $opt in
	"install apache2")
		echo "installing ..."
		bash install.sh
		;;
	"reinstall apache2")
		echo "reinstalling ..."
		bash reinstall.sh
		;;
	"uninstall apache2 only")
		echo "uninstalling ..."
		bash uninstall.sh
		;;
	"uninstall apache2 and remove conf files")
		echo "uninstalling ..."
		bash uninstall-purge.sh
		;;
	"show apache2 status")
		echo "status ..."
		bash status.sh
		;;
	"list all Vhosts")
		echo "List of all Vhosts"
		bash Vhost-list.sh
		;;
	"add Vhost")
		echo "add new Vhost"
		bash Vhost-add.sh
		;;
	"delete Vhost")
		echo "deleting Vhost ..."
		bash Vhost-delete.sh
		;;
	"enable site")
		echo "enabling site for Vhost"
		bash enableSite.sh
		;;
	"disable site")
		echo "disabling site for Vhost"
		bash disableSite.sh
		;;
	"enable authentication")
		echo "enabling auth for Vhost"
		bash enableAuth.sh
		;;
	"disable authentication")
		echo "disabling auth for Vhost"
		bash disableAuth.sh
		;;
	"quit")
		echo "bye"
		exit
		;;
	*)
		echo "invalid option $REPLY"
		;;
	esac
done
